# PM Status – 2024-11-08

コア計算タスク（Coupled／Contact／並列ソルバ／3D 移行）に集中するための進行管理メモ。通知・可視化といった周辺機能は appendix 運用とし、必要に応じて参照する。

---

## Scope & Current Focus
- **Coupled solver parity with chrono-main** – `docs/coupled_island_migration_plan.md` のロードマップで KKT ディスクリプタ／Iterative Solver／接触 3DOF／島ワークスペース拡張が週次バックログ化済み。残タスクは 20–25% を想定し、chrono-main への条件数診断（chrono-main spectral logs）を Chrono-C へ共有する流れを維持する。
- **Descriptor evidence hardening** – `tests/test_coupled_constraint` に `--descriptor-mode actions` と pivot アーティファクト出力を追加し、`docs/logs/kkt_descriptor_poc_e2e.md` / `docs/reports/kkt_spectral_weekly.md` を Actions から直接 diff できるようにした。
- **Multi-ω 管理** – `tools/update_multi_omega_assets.py` で `bench_coupled_constraint --omega …` を回しつつ README／Hands-on／`data/coupled_constraint_presets.yaml`／`data/diagnostics/kkt_backend_stats.json` を同一タイムスタンプで更新できるようにした。
- **Nightly workflow stability** – `docs/coupled_endurance_ci_troubleshooting.md` と `docs/wiki_coupled_endurance_article.md` が CI 手順と Wiki 引き継ぎを網羅。`tools/filter_coupled_endurance_log.py` でログの縮約（force/impulse/diagnostics カラム）を標準化し、lint／報告スクリプトと組み合わせてログを扱う。
- **Tutorial & migration docs** – `docs/documentation_changelog.md` と `docs/optional_features_appendix_plan.md` で Appendix への切り出しを追跡。計算コア本編は数値・API 解説へ集中し、メディア／通知系は `docs/appendix_optional_ops.md` 配下へ移管。

---

## KPI Snapshot (Synced with Migration Plan)
| イニシアチブ | 進捗 | 残タスク | 備考 |
|--------------|------|----------|------|
| Coupled 拘束移行 | 83 % | KKT 共有化の最終レビュー、3D ダイアグノスティクス研磨 | `docs/coupled_island_migration_plan.md` §5.1 と共有（2025-11-10, 担当: Mori）。 |
| Island ソルバ統合 | 73 % | Contact 併用テスト、OpenMP 最適化 | Appendix B.5.1 水曜オーナー（Kobayashi）が更新。 |
| 3D 抽象化 | 50 % | 共通構造体導入、KKT アダプタ検証 | `docs/chrono_3d_abstraction_note.md` §10 と KPI を揃える。 |

> 週次で値を更新する際は Appendix B.5.1 の担当ローテーションに従い、`docs/coupled_island_migration_plan.md` と本ファイルを同じコミットで編集する。

---

## Team Status (A/B/C)

| Team | フォーカス | 現状サマリ | 直近の監視ポイント |
|------|-----------|-----------|--------------------|
| **A – Coupled / Contact / Parallel** | KKT 共有化、Iterative Solver、Island 並列 | `docs/coupled_island_migration_plan.md` §6 に Actions での descriptor CLI、一時的な oneTBB fallback、3DOF Jacobian 検証、`tools/update_multi_omega_assets.py` の連携を追記済み。ダイアグノスティクス共通化も着手済み。 | chrono-main の KKT/Spectral 診断ログを週次で比較し、ディスクリプタ PoC → バッチ統合 → E2E テストのブロッカー（Math ヘルパ、OpenMP→TBB）を洗い出す。|
| **B – Nightly / Diagnostics Toolchain** | 耐久 CI 安定運用、ログフィルタ／lint／報告書 | `docs/coupled_endurance_ci_troubleshooting.md` がアラート別の再現／報告フロー、`docs/wiki_coupled_endurance_article.md` が担当ローテと KPI 定義を管理。`tools/filter_coupled_endurance_log.py` で CSV から必須カラムのみ抽出し、`tools/plot_*` / `tools/diagnostic_log_report.py` へ受け渡す構成。 | Nightly `coupled_endurance.yml` が `archive-and-summarize` → Report → Upload の 3 ステップで常に完走しているか、`latest.summary.*` が Appendix チェックリストに沿って更新されているかを監視。|
| **C – Tutorials / Docs / Appendix** | チュートリアル更新、学習教材、Appendix 切り出し | `docs/documentation_changelog.md` で 10/21, 11/03 の改訂内容（チュートリアル整備、Hands-on 追加、Appendix 新設）を追記。`docs/optional_features_appendix_plan.md` と `docs/appendix_optional_ops.md` が Appendix A–D（Media, Wiki, Logging, Benchmark）を定義し、本編から運用情報を削減済み。 | Appendix の残タスク（Contact+Coupled テスト運用メモ）を B 章へ追加し、本編ドキュメントは API／数値解説に限定されているかを査読。|

---

## Monitoring Checklist
1. **Coupled Solver KKT / Spectral Diagnostics**  
   - `docs/coupled_island_migration_plan.md` のテーブルを週次で更新し、KKT PoC → Iterative Solver → Diagnostics 共通化の依存鎖を確認。  
   - chrono-main の `ChSystemDescriptor` / `ChIterativeSolverVI` とローカル PoC の差分（条件数、ピボットログ）を `docs/chrono_3d_abstraction_note.md` §10 テンプレへ反映。
   - `./chrono-C-all/tests/test_coupled_constraint --use-kkt-descriptor --descriptor-mode actions --pivot-artifact-dir …` を CI で毎回叩き、`docs/logs/kkt_descriptor_poc_e2e.md` と `docs/reports/kkt_spectral_weekly.md` に evidence を積み上げる（`tools/compare_kkt_logs.py` で差分可視化）。
   - README／Hands-on／preset の同時更新は `python3 tools/update_multi_omega_assets.py --refresh-report` を使い、`data/diagnostics/kkt_backend_stats.json` も合わせて再生成する。
2. **Nightly Workflow Stability**  
   - `docs/coupled_endurance_ci_troubleshooting.md` の 3 ステップ（Archive / Summaries / Upload）が完走するかを Actions から確認。  
   - `tools/filter_coupled_endurance_log.py` → `tools/diagnostic_log_report.py` のフィルタ／lint／報告書が最新 CSV に適用されているか、Appendix B/C のチェックリストで確認。
3. **Tutorial & Migration Docs**  
   - `docs/documentation_changelog.md` の 11/03 エントリ以降、計算コア関連ドキュメントのみ本編に残っているかレビュー。  
   - Appendix (`docs/appendix_optional_ops.md`) にて Media / Wiki / Logging / Benchmark の運用テンプレが最新か、未決事項（公開方法・メディア配置）の意思決定をトラッキング。

---

## Next Steps
1. **Weekly backlog reviews (A/B/C 共通)**  
   - `docs/coupled_island_migration_plan.md` §6.1 のテーブルを週次で埋め、chrono-main 移行残 20–25% を確定。各行に「今週の作業 / 次週アクション / Owner / 依存関係」を必ず入力し、工数差分をテンプレに反映。
2. **Documentation light-weighting**  
   - `docs/optional_features_appendix_plan.md` で Appendix 対象リストを更新し、まだ本編に残る通知・可視化・公開手順を `docs/appendix_optional_ops.md` へ移設。元ドキュメントには「詳細は Appendix」を追記してリンクのみ残す。
3. **3D-readiness memo**  
   - `docs/chrono_3d_abstraction_note.md` §1–4, §10 をベースに Coupled diagnostics・Island solver・Contact 管理の共通化ポイントを 1 枚の技術メモへ整理。`ChronoConstraintCommon_C` の ABI、ロガー共通化、３自由度 Jacobian 設計を特に強調し、Coupled/Contact/Parallel 各チームで共有する。
4. **Scheduler / workspace PoC**  
   - `docs/island_scheduler_poc.md` に oneTBB shim、fallback ログ、3D workspace 呼び出し例を追記し、`TBB_LIBS=-ltbb` を指定した環境で `bench_island_solver --scheduler tbb` を再測定する。CI では fallback 測定値を `data/diagnostics/bench_island_scheduler.csv` に残しておく。

---

## Shared References
- Coupled / Island Migration: `docs/coupled_island_migration_plan.md`
- Nightly Ops & Toolchain: `docs/coupled_endurance_ci_troubleshooting.md`, `docs/wiki_coupled_endurance_article.md`, `tools/filter_coupled_endurance_log.py`
- Documentation Governance: `docs/documentation_changelog.md`, `docs/optional_features_appendix_plan.md`, `docs/appendix_optional_ops.md`
- 3D Migration & Diagnostics: `docs/chrono_3d_abstraction_note.md`

> 上記ノートは A/B/C 各チームの週次ステータス共有テンプレとして利用可能です。次チャットでは、このノートを土台に工数・リスク更新のみを行えば自律的に進行できます。
